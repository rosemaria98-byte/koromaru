<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ころまるのだいぼうけん</title>
<style>
body{margin:0;background:black;color:white;font-family:sans-serif;}
canvas{display:block;}
</style>
</head>
<body>
<canvas id="game"></canvas>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let state="title";
let koromaru={x:200,y:300};
let bones=[];
let score=0;

const img=new Image();
img.src="title.png";

canvas.addEventListener("touchstart",e=>{
 if(state==="title"){
  state="game";
 }else{
  koromaru.x=e.touches[0].clientX;
  koromaru.y=e.touches[0].clientY;
 }
});

setInterval(()=>{
 if(state==="game"){
  bones.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height});
 }
},1000);

function drawTitle(){
 ctx.drawImage(img,0,0,canvas.width,canvas.height);
 ctx.fillStyle="white";
 ctx.font="28px sans-serif";
 ctx.fillText("ころまるのだいぼうけん！",20,60);
 ctx.fillText("(かいぬしさんはどこ)",20,100);
 ctx.fillText("タップでスタート",20,150);
}

function drawGame(){
 ctx.fillStyle="brown";
 ctx.beginPath();
 ctx.arc(koromaru.x,koromaru.y,25,0,Math.PI*2);
 ctx.fill();

 ctx.fillStyle="white";
 bones.forEach(b=>{
  ctx.beginPath();
  ctx.arc(b.x,b.y,10,0,Math.PI*2);
  ctx.fill();
 });
}

function loop(){
 ctx.clearRect(0,0,canvas.width,canvas.height);
 if(state==="title") drawTitle();
 else drawGame();
 requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>